Følgende kode er main funktionen, der bliver brugt til at danne et skema for udskolingssektorene på en vilkårlig skole. Under koden findes et diagram der kan bruges til at danne overblik over main funktionen, funktionerne der bliver kaldt i main funktionen og hvad de returnere til main funktionen. 
\begin{lstlisting}[showstringspaces=false,language = c]
int main(void){
  
  int main(void){
  int h_classes[NUMBER_OF_HEAVY_LESSONS] = {mat, fys, eng, dan, tys};

  individual individuals[NUMBER_OF_CLASSES][NUMBER_OF_INDIVIDUALS];
  individual chosen_individual[NUMBER_OF_CLASSES][NUMBER_OF_GENERATIONS];
  individual best_of_best[NUMBER_OF_CLASSES];
  individual individuals_temp[NUMBER_OF_CLASSES][NUMBER_OF_INDIVIDUALS];
  requirements requirements_classes[NUMBER_OF_CLASSES];
  
  teacher teacher_data[NUMBER_OF_CLASSES][NUMBER_OF_SUBJECTS];
  read_teachers_name(teacher_data);
  find_req(teacher_data, requirements_classes);

  srand(time(NULL));

  create_individuals(individuals);
  calculate_fitness_all(individuals, h_classes, teacher_data, requirements_classes);

 for(int j = 0; j < NUMBER_OF_CLASSES; j += 3){
    choose_individual(individuals, chosen_individual, j, 0);
  }
 
  int i, j;
  for (i = 0; i < NUMBER_OF_GENERATIONS; i++){
    selektion(individuals);
    
    mutation(individuals);

    crossover(individuals, individuals_temp, requirements_classes, i);

    calculate_fitness_all(individuals, h_classes, teacher_data, requirements_classes);

    for(j = 0; j < (NUMBER_OF_CLASSES); j += 3){
      choose_individual(individuals, chosen_individual, j, i);  
    }
  }
  i--;
  find_best(chosen_individual, best_of_best);

  printf("\n\n\n");
  print_func(best_of_best, requirements_classes, i, teacher_data);

  return 0;
}
\end{lstlisting}

Først initialiseres de arrays, der bliver brugt i programmets funktioner. De arrays, som bliver dannet to dimensionelle.
Dernæst forberedes den genetiske algoritme. Srand funktionen klargøres ved at kalde seeded til rand med antallet af sekunder siden 1. januar 1970 (time(NULL)).\footfullcite{timefunc} Individerne bliver givet tilfædige værdier i lesson\_num (de får indsat tilfældige lektioner). Herefter udregnes individernes fitness og de bliver sendt ind i for loopet der kører en gang per generation. I loopet udføres en selektion af alle individer ved hjælp af roulette metoden. Herefter er der i hvert skema sandsynlighed for mutationer. Efter mutationen bliver skemaerne lavet om til crossovers mellem to tilfældige forældre. Efter denne process bliver skemaernes fitness igen regnet ud, inden for loopet begynder forfra. Der kan dannes et overblik over main med følgende diagram:
\begin{figure}[!h]
  \centering
  \includegraphics[width=\textwidth]{partials/graphics/main.png}
  \caption{Diagram over main.}
  \label{fig:main}
\end{figure}
