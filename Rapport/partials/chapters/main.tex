Følgende kode er main funktionen, der bliver brugt til at danne et skema for udskolingssektorene på en vilkårlig skole. Under koden findes et diagram der kan bruges til at danne overblik over main funktionen, funktionerne der bliver kaldt i main funktionen og hvad de returnere til main funktionen. 
\begin{lstlisting}[language = c]
int main(void){
  
  int h_classes[NUMBER_OF_HEAVY_LESSONS] = {mat, fys, eng, dan, tys};

  individual individuals[NUMBER_OF_CLASSES][NUMBER_OF_INDIVIDUALS];
  individual chosen_individual[NUMBER_OF_CLASSES][NUMBER_OF_GENERATIONS];
  individual individuals_temp[NUMBER_OF_CLASSES][NUMBER_OF_INDIVIDUALS];
  lesson week[NUMBER_OF_CLASSES][SCHOOL_DAYS_IN_WEEK * LESSONS_PER_DAY_MAX];
  requirements requirements_classes[NUMBER_OF_CLASSES];
  
  int number_of_teacher = find_number_of_teachers();
  teacher teacher_data[NUMBER_OF_CLASSES][NUMBER_OF_FAG];
  read_teachers_name(teacher_data, number_of_teacher);
  find_req(teacher_data, requirements_classes);

  srand(time(NULL));

  create_individuals(individuals);
  calculate_fitness_all(individuals, h_classes, teacher_data, requirements_classes);

  int i, j;
  for (i = 0; i < NUMBER_OF_GENERATIONS; i++){
    calculate_fitness_all(individuals, h_classes, teacher_data, requirements_classes);

    selektion(individuals);
    
    mutation(individuals);

    crossover(individuals, individuals_temp);

    for(j = 0; j < (NUMBER_OF_CLASSES); j += 3){
      choose_individual(individuals, chosen_individual, j, i);  
    }
    printf("%d \t %d \t %d \t %d \t %d \t %d \t %d \t %d \t %d \n", chosen_individual[0][i].fitness, chosen_individual[1][i].fitness, chosen_individual[2][i].fitness, 
                                                                    chosen_individual[3][i].fitness, chosen_individual[4][i].fitness, chosen_individual[5][i].fitness, 
                                                                    chosen_individual[6][i].fitness, chosen_individual[7][i].fitness, chosen_individual[8][i].fitness);
  }

  for(i = 0; i < NUMBER_OF_CLASSES; i++){
    printf("  The fitness is: %d   8.A's Skoleschedule: \n", chosen_individual[i][NUMBER_OF_GENERATIONS -1].fitness);
    create_schedule(week, chosen_individual[i][NUMBER_OF_GENERATIONS -1], i);
    print_schedule(week, i);

    if (i % 3 == 0){
      printf("\n\n");
    }
  }

  return 0;
}
\end{lstlisting}
Først initialiseres de arrays der bliver brugt i programmets funktioner. De arrays der bliver dannet har to dimensioner.
Dernæst forberedes der til brugen af den genetiske algoritme. Srand funktionen klar gøres ved at sætte time til at være NULL. Herefter udregnes individernes fitness. Individerne bliver herefter sendt ned til selektion. I selektionen benyttes roulette metoden, til at finde den næste generations forældre. Efter selektionen er færdiggjort bliver individerne muteret. Til sidst i den genetiske algoritmer bliver der foretaget en crossover på individerne. Den genetiske algoritme køres i 400 gange, det vil sige at der dannes 400 generationer i den genetiske algoritme.  De individerne med den bedste fitness bliver dernæst printet, og det undersøges om det generede skema er tilpas. Der kan dannes et overblik over main med følgende diagram:
\begin{figure}[!h]
  \centering
  \includegraphics[width=\textwidth]{partials/graphics/main.png}
  \caption{Diagram over main.}
  \label{fig:main}
\end{figure}
